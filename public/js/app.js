!function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./SubjectObserver"),i=(r=a)&&r.__esModule?r:{default:r};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.total=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"setTotal",value:function(e){this.total=e}},{key:"setObservers",value:function(e){e.forEach(function(e){e.notifies.forEach(function(t){t.observers.forEach(function(n){e.instance.addObserver(t.name,n.instance,n.callback)})})})}},{key:"setEventHandlers",value:function(e){var t=this;document.getElementById(this.appId).addEventListener("click",function(n){var r=n||window.event,o=r.target||r.srcElement;if("button"!==o.tagName.toLowerCase())return!1;if(o.hasAttribute("data-download")){o.classList.toggle(t.loadingClass);var a=[].slice.call(document.getElementById(t.itemsId).children).length;t.total>a&&setTimeout(function(){t.notify("showMore",e.restore()),o.classList.toggle(t.loadingClass),a+t.perRow>=t.total&&o.setAttribute("disabled","disabled")},500)}o.hasAttribute("data-delete")&&(o.classList.toggle(t.loadingClass),setTimeout(function(){t.notify("removeElem",o.getAttribute("data-delete")),o.classList.toggle(t.loadingClass),o.parentNode.parentNode.parentNode.parentNode.removeChild(o.parentNode.parentNode.parentNode),document.getElementById(t.appId).lastElementChild.removeAttribute("disabled")},500))})}}]),t}();n.default=s},{"./SubjectObserver":6}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=e("./SubjectObserver"),a=(r=o)&&r.__esModule?r:{default:r};var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.url="http://81.177.101.143:30080/test.json",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=i},{"./SubjectObserver":6}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./LoadManager"),i=(r=a)&&r.__esModule?r:{default:r};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.url="http://www.whateverorigin.org/get?url=http://81.177.101.143:30080/test.json",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"load",value:function(){var e=this;return new Promise(function(t,n){var r="jsonp_callback_"+Math.round(1e5*Math.random());window[r]=function(e){delete window[r],document.body.removeChild(o),t(e)};var o=document.createElement("script");o.src=e.url+(~e.url.indexOf("?")?"&":"?")+"callback="+r,document.body.appendChild(o),o.onerror=function(e){n(e)}})}}]),t}();n.default=s},{"./LoadManager":2}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.list={}}return r(e,[{key:"add",value:function(e,t,n){Array.isArray(this.list[e])||(this.list[e]=[]),this.list[e].push({instance:t,callback:n})}}]),e}();n.default=o},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./SubjectObserver"),i=(r=a)&&r.__esModule?r:{default:r};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="rostelecom",n.data=null,n.type="sessionStorage",n.sortProp="age",n.shownIds=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"totalNum",value:function(){return this.data?this.total=this.data.length:this.total=JSON.parse(window[this.type].getItem(this.name)).length}},{key:"removeItemId",value:function(e){~this.shownIds.indexOf(e)&&this.shownIds.splice(this.shownIds.indexOf(e),1)}},{key:"isAvailable",value:function(){try{var e=window[this.type],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}},{key:"isEmpty",value:function(){return!this.isAvailable()||!window[this.type].getItem(this.name)}},{key:"save",value:function(e){if(!e)return!1;if(!this.isAvailable())return this.data=e,!1;try{return window[this.type].setItem(this.name,JSON.stringify(e)),this.name}catch(t){return this.data=e,!1}}},{key:"sort",value:function(e){var t=this;return e.slice(0).sort(function(e,n){return e[t.sortProp]>n[t.sortProp]?1:e[t.sortProp]<n[t.sortProp]?-1:0})}},{key:"paginate",value:function(e){var t=this,n=[],r=0;return e.every(function(e){return r!==t.perRow&&t.shownIds.length!==t.totalNum()&&(~t.shownIds.indexOf(e.id)||(n.push(e),t.shownIds.push(e.id),r++),!0)}),n}},{key:"restore",value:function(){return this.data?this.paginate(this.sort(this.data)):this.paginate(this.sort(JSON.parse(window[this.type].getItem(this.name))))}}]),t}();n.default=s},{"./SubjectObserver":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=t,this.appId="container",this.itemsId="items",this.loadingClass="loading",this.perRow=4}return r(e,[{key:"addObserver",value:function(e,t,n){this.observers.add(e,t,n)}},{key:"notify",value:function(e,t){this.observers.list[e].forEach(function(e){return e.instance.update(e.callback,t)})}},{key:"update",value:function(e,t){e.call(this,t)}}]),e}();n.default=o},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./SubjectObserver"),i=(r=a)&&r.__esModule?r:{default:r};var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"ready",value:function(){return new Promise(function(e,t){"interactive"!==document.readyState&&"complete"!==document.readyState||e(document.readyState),document.onreadystatechange=function(){~["interactive","complete"].indexOf(document.readyState)&&(e(document.readyState),document.onreadystatechange=null)}})}},{key:"renderView",value:function(e){var t=document.getElementById(this.appId),n='<div id="'+this.itemsId+'">'+this.templateItems(e)+'</div>\n                <button data-download><img src="spinner.gif">download</button>';t.innerHTML=n}},{key:"renderItems",value:function(e){document.getElementById(this.itemsId).insertAdjacentHTML("afterbegin",this.templateItems(e))}},{key:"templateItems",value:function(e){var t=this,n="";return e.forEach(function(e){n+=t.templateItem(e)}),n}},{key:"templateItem",value:function(e){return this.shown++,'<div class="item">\n              <img src="spinner.gif" class="no-image"/>\n              <div class="flex">\n                <div class="content front"><span>'+e.name+'</span></div>\n                <div class="content back">\n                  <span>'+e.name+"</span>\n                  <span>"+e.text+'</span>\n                  <button data-delete="'+e.id+'"><img src="spinner.gif">delete</button>\n                </div>\n              </div>\n            </div>'}}]),t}();n.default=s},{"./SubjectObserver":6}],8:[function(e,t,n){"use strict";var r=e("./config"),o=r.storageManager.isEmpty()?r.loadManager.load():Promise.resolve(!1),a=r.viewManager.ready();Promise.all([o,a]).then(function(e){r.loadManager.notify("dataLoaded",e[0].contents),r.loadManager.notify("totalNum",r.storageManager.totalNum()),r.eventManager.setEventHandlers(r.storageManager),r.eventManager.notify("handlersReady",r.storageManager.restore())},function(e){r.loadManager.notify("test",e)})},{"./config":9}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.eventManager=n.storageManager=n.viewManager=n.loadManager=void 0;var r=u(e("./ObserverList")),o=u(e("./ViewManager")),a=u(e("./EventManager")),i=u(e("./LoadManagerProxy")),s=u(e("./StorageManager"));function u(e){return e&&e.__esModule?e:{default:e}}var c=new i.default(new r.default),l=new o.default(new r.default),f=new s.default(new r.default),d=new a.default(new r.default),p=[{instance:c,notifies:[{name:"dataLoaded",observers:[{instance:f,callback:f.save}]},{name:"totalNum",observers:[{instance:d,callback:d.setTotal}]}]},{instance:l,notifies:[{name:"domReady",observers:[{instance:d,callback:d.setHandlers}]}]},{instance:d,notifies:[{name:"handlersReady",observers:[{instance:l,callback:l.renderView}]},{name:"showMore",observers:[{instance:l,callback:l.renderItems}]},{name:"removeElem",observers:[{instance:f,callback:f.removeItemId}]}]}];d.setObservers(p),n.loadManager=c,n.viewManager=l,n.storageManager=f,n.eventManager=d},{"./EventManager":1,"./LoadManagerProxy":3,"./ObserverList":4,"./StorageManager":5,"./ViewManager":7}]},{},[8]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwib2JqIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImtleSIsIkNvbnN0cnVjdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX1N1YmplY3RPYnNlcnZlcjIiLCJfU3ViamVjdE9ic2VydmVyMyIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiRXZlbnRNYW5hZ2VyIiwiX1N1YmplY3RPYnNlcnZlciIsIk9ic2VydmVyTGlzdCIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aGlzIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJnZXRQcm90b3R5cGVPZiIsInRvdGFsIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzZXRQcm90b3R5cGVPZiIsIl9pbmhlcml0cyIsImNvbmZpZyIsImZvckVhY2giLCJzdWJqZWN0Iiwibm90aWZpZXMiLCJldnQiLCJvYnNlcnZlcnMiLCJvYnNlcnZlciIsImFkZE9ic2VydmVyIiwibmFtZSIsImNhbGxiYWNrIiwic3RvcmFnZU1hbmFnZXIiLCJfdGhpczIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYXBwSWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ3aW5kb3ciLCJlbGVtIiwic3JjRWxlbWVudCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImhhc0F0dHJpYnV0ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImxvYWRpbmdDbGFzcyIsImxvYWRlZEl0ZW1zIiwic2xpY2UiLCJpdGVtc0lkIiwiY2hpbGRyZW4iLCJzZXRUaW1lb3V0Iiwibm90aWZ5IiwicmVzdG9yZSIsInBlclJvdyIsInNldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImxhc3RFbGVtZW50Q2hpbGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCIuL1N1YmplY3RPYnNlcnZlciIsIjIiLCJMb2FkTWFuYWdlciIsInVybCIsIjMiLCJfTG9hZE1hbmFnZXIyIiwiX0xvYWRNYW5hZ2VyMyIsIkxvYWRNYW5hZ2VyUHJveHkiLCJfTG9hZE1hbmFnZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNhbGxiYWNrTmFtZSIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImRhdGEiLCJib2R5Iiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsImluZGV4T2YiLCJhcHBlbmRDaGlsZCIsIm9uZXJyb3IiLCJlcnJvciIsIi4vTG9hZE1hbmFnZXIiLCI0IiwibGlzdCIsIkFycmF5IiwiaXNBcnJheSIsInB1c2giLCI1IiwiU3RvcmFnZU1hbmFnZXIiLCJ0eXBlIiwic29ydFByb3AiLCJzaG93bklkcyIsIkpTT04iLCJwYXJzZSIsImdldEl0ZW0iLCJpZCIsInNwbGljZSIsInN0b3JhZ2UiLCJ4Iiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJpc0F2YWlsYWJsZSIsInN0cmluZ2lmeSIsIml0ZW1zIiwic29ydCIsImIiLCJfdGhpczMiLCJpdGVtc1RvU2hvdyIsImNvdW50IiwiZXZlcnkiLCJpdGVtIiwidG90YWxOdW0iLCJwYWdpbmF0ZSIsIjYiLCJTdWJqZWN0T2JzZXJ2ZXIiLCJhZGQiLCJ1cGRhdGUiLCI3IiwiVmlld01hbmFnZXIiLCJyZWFkeVN0YXRlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicm9vdCIsInZpZXciLCJ0ZW1wbGF0ZUl0ZW1zIiwiaW5uZXJIVE1MIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwidGVtcGxhdGVJdGVtIiwic2hvd24iLCJ0ZXh0IiwiOCIsIl9jb25maWciLCJqc29uIiwiaXNFbXB0eSIsImxvYWRNYW5hZ2VyIiwibG9hZCIsImRvbSIsInZpZXdNYW5hZ2VyIiwicmVhZHkiLCJhbGwiLCJ0aGVuIiwicmVzdWx0IiwiZXZlbnRNYW5hZ2VyIiwic2V0RXZlbnRIYW5kbGVycyIsIi4vY29uZmlnIiwiOSIsInVuZGVmaW5lZCIsIl9PYnNlcnZlckxpc3QyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9WaWV3TWFuYWdlcjIiLCJfRXZlbnRNYW5hZ2VyMiIsIl9Mb2FkTWFuYWdlclByb3h5MiIsIl9TdG9yYWdlTWFuYWdlcjIiLCJzYXZlIiwic2V0VG90YWwiLCJzZXRIYW5kbGVycyIsInJlbmRlclZpZXciLCJyZW5kZXJJdGVtcyIsInJlbW92ZUl0ZW1JZCIsInNldE9ic2VydmVycyIsIi4vRXZlbnRNYW5hZ2VyIiwiLi9Mb2FkTWFuYWdlclByb3h5IiwiLi9PYnNlcnZlckxpc3QiLCIuL1N0b3JhZ2VNYW5hZ2VyIiwiLi9WaWV3TWFuYWdlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxTQUFTQyxFQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsSUFBSUUsRUFBa0IsbUJBQVRDLFNBQXFCQSxRQUFRLElBQUlGLEdBQUdDLEVBQUUsT0FBT0EsRUFBRUYsR0FBRSxHQUFJLEdBQUdJLEVBQUUsT0FBT0EsRUFBRUosR0FBRSxHQUFJLElBQUlLLEVBQUUsSUFBSUMsTUFBTSx1QkFBdUJOLEVBQUUsS0FBSyxNQUFNSyxFQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxJQUFJRyxFQUFFWCxFQUFFRyxJQUFJUyxZQUFZYixFQUFFSSxHQUFHLEdBQUdVLEtBQUtGLEVB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QUFTdUwsRUFBdUJ6SyxHQUFPLE9BQU9BLEdBQU9BLEVBQUlnQixXQUFhaEIsR0FBUWlCLFFBQVNqQixHQUV2RixJQUFJMkosRUFBYyxJQUFJaUIsRUFBbUIzSixRQUFRLElBQUl1SixFQUFldkosU0FJaEU2SSxFQUFjLElBQUlZLEVBQWN6SixRQUFRLElBQUl1SixFQUFldkosU0FDM0QrQixFQUFpQixJQUFJNkgsRUFBaUI1SixRQUFRLElBQUl1SixFQUFldkosU0FDakVrSixFQUFlLElBQUlRLEVBQWUxSixRQUFRLElBQUl1SixFQUFldkosU0FFN0RxQixJQUNGakIsU0FBVXNJLEVBQ1ZsSCxXQUNFSyxLQUFNLGFBQ05ILFlBQ0V0QixTQUFVMkIsRUFDVkQsU0FBVUMsRUFBZThILFNBRzNCaEksS0FBTSxXQUNOSCxZQUNFdEIsU0FBVThJLEVBQ1ZwSCxTQUFVb0gsRUFBYVksZUFJM0IxSixTQUFVeUksRUFDVnJILFdBQ0VLLEtBQU0sV0FDTkgsWUFDRXRCLFNBQVU4SSxFQUNWcEgsU0FBVW9ILEVBQWFhLGtCQUkzQjNKLFNBQVU4SSxFQUNWMUgsV0FDRUssS0FBTSxnQkFDTkgsWUFDRXRCLFNBQVV5SSxFQUNWL0csU0FBVStHLEVBQVltQixlQUd4Qm5JLEtBQU0sV0FDTkgsWUFDRXRCLFNBQVV5SSxFQUNWL0csU0FBVStHLEVBQVlvQixnQkFHeEJwSSxLQUFNLGFBQ05ILFlBQ0V0QixTQUFVMkIsRUFDVkQsU0FBVUMsRUFBZW1JLG1CQUkvQmhCLEVBQWFpQixhQUFhOUksR0FDMUI5QyxFQUFRbUssWUFBY0EsRUFDdEJuSyxFQUFRc0ssWUFBY0EsRUFDdEJ0SyxFQUFRd0QsZUFBaUJBLEVBQ3pCeEQsRUFBUTJLLGFBQWVBLElBRXBCa0IsaUJBQWlCLEVBQUVDLHFCQUFxQixFQUFFQyxpQkFBaUIsRUFBRUMsbUJBQW1CLEVBQUVDLGdCQUFnQixTQUFTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9TdWJqZWN0T2JzZXJ2ZXIyID0gcmVxdWlyZSgnLi9TdWJqZWN0T2JzZXJ2ZXInKTtcblxudmFyIF9TdWJqZWN0T2JzZXJ2ZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ViamVjdE9ic2VydmVyMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0gLypcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogRXZlbnRNYW5hZ2VyJ3MgIGNhcnJpZXMgb3V0IFN1YmplY3QtT2JzZXJ2ZXIgcmVsYXNoaW9uc2hpcHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgRXZlbnRNYW5hZ2VyID0gZnVuY3Rpb24gKF9TdWJqZWN0T2JzZXJ2ZXIpIHtcbiAgX2luaGVyaXRzKEV2ZW50TWFuYWdlciwgX1N1YmplY3RPYnNlcnZlcik7XG5cbiAgZnVuY3Rpb24gRXZlbnRNYW5hZ2VyKE9ic2VydmVyTGlzdCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudE1hbmFnZXIpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEV2ZW50TWFuYWdlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEV2ZW50TWFuYWdlcikpLmNhbGwodGhpcywgT2JzZXJ2ZXJMaXN0KSk7XG5cbiAgICBfdGhpcy50b3RhbCA9IDA7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEV2ZW50TWFuYWdlciwgW3tcbiAgICBrZXk6ICdzZXRUb3RhbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRvdGFsKHRvdGFsKSB7XG4gICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgfVxuICAgIC8vIGNhcnJpZXMgb3V0IFN1YmplY3QtT2JzZXJ2ZXIgcmVsYXNoaW9uc2hpcHMgZGVmaW5lZCBpbiBjb25maWcuanNcblxuICB9LCB7XG4gICAga2V5OiAnc2V0T2JzZXJ2ZXJzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T2JzZXJ2ZXJzKGNvbmZpZykge1xuICAgICAgY29uZmlnLmZvckVhY2goZnVuY3Rpb24gKHN1YmplY3QpIHtcbiAgICAgICAgc3ViamVjdC5ub3RpZmllcy5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICBldnQub2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICBzdWJqZWN0Lmluc3RhbmNlLmFkZE9ic2VydmVyKGV2dC5uYW1lLCBvYnNlcnZlci5pbnN0YW5jZSwgb2JzZXJ2ZXIuY2FsbGJhY2spO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBBcHAncyBiZWhhdmlvdXIuIEFmdGVyIGdldHRpbmcgdXNlcnMnIGJlaGF2aW91ciBkYXRhIG5vdGlmaWVzIGRlcGVuZGFudHMgZm9yIG1haW4gYWN0aW9uc1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZXRFdmVudEhhbmRsZXJzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RXZlbnRIYW5kbGVycyhzdG9yYWdlTWFuYWdlcikge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuYXBwSWQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBlID0gZXZlbnQgfHwgd2luZG93LmV2ZW50LFxuICAgICAgICAgICAgZWxlbSA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICAgICAgaWYgKGVsZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnYnV0dG9uJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoZWxlbS5oYXNBdHRyaWJ1dGUoJ2RhdGEtZG93bmxvYWQnKSkge1xuICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnRvZ2dsZShfdGhpczIubG9hZGluZ0NsYXNzKTtcbiAgICAgICAgICB2YXIgbG9hZGVkSXRlbXMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF90aGlzMi5pdGVtc0lkKS5jaGlsZHJlbikubGVuZ3RoO1xuICAgICAgICAgIGlmIChfdGhpczIudG90YWwgPiBsb2FkZWRJdGVtcykge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzMi5ub3RpZnkoJ3Nob3dNb3JlJywgc3RvcmFnZU1hbmFnZXIucmVzdG9yZSgpKTtcbiAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QudG9nZ2xlKF90aGlzMi5sb2FkaW5nQ2xhc3MpO1xuICAgICAgICAgICAgICBpZiAobG9hZGVkSXRlbXMgKyBfdGhpczIucGVyUm93ID49IF90aGlzMi50b3RhbCkgZWxlbS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbS5oYXNBdHRyaWJ1dGUoJ2RhdGEtZGVsZXRlJykpIHtcbiAgICAgICAgICBlbGVtLmNsYXNzTGlzdC50b2dnbGUoX3RoaXMyLmxvYWRpbmdDbGFzcyk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczIubm90aWZ5KCdyZW1vdmVFbGVtJywgZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGVsZXRlJykpO1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QudG9nZ2xlKF90aGlzMi5sb2FkaW5nQ2xhc3MpO1xuICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW0ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX3RoaXMyLmFwcElkKS5sYXN0RWxlbWVudENoaWxkLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRXZlbnRNYW5hZ2VyO1xufShfU3ViamVjdE9ic2VydmVyMy5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRXZlbnRNYW5hZ2VyO1xuXG59LHtcIi4vU3ViamVjdE9ic2VydmVyXCI6Nn1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfU3ViamVjdE9ic2VydmVyMiA9IHJlcXVpcmUoXCIuL1N1YmplY3RPYnNlcnZlclwiKTtcblxudmFyIF9TdWJqZWN0T2JzZXJ2ZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ViamVjdE9ic2VydmVyMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0gLypcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogUGFyZW50IGNsYXNzIGZvciBmdXJ0aGVyIGltcGxlbWVudGF0aW9ucy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cblxudmFyIExvYWRNYW5hZ2VyID0gZnVuY3Rpb24gKF9TdWJqZWN0T2JzZXJ2ZXIpIHtcbiAgX2luaGVyaXRzKExvYWRNYW5hZ2VyLCBfU3ViamVjdE9ic2VydmVyKTtcblxuICBmdW5jdGlvbiBMb2FkTWFuYWdlcihPYnNlcnZlckxpc3QpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9hZE1hbmFnZXIpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExvYWRNYW5hZ2VyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTG9hZE1hbmFnZXIpKS5jYWxsKHRoaXMsIE9ic2VydmVyTGlzdCkpO1xuXG4gICAgX3RoaXMudXJsID0gJ2h0dHA6Ly84MS4xNzcuMTAxLjE0MzozMDA4MC90ZXN0Lmpzb24nO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHJldHVybiBMb2FkTWFuYWdlcjtcbn0oX1N1YmplY3RPYnNlcnZlcjMuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IExvYWRNYW5hZ2VyO1xuXG59LHtcIi4vU3ViamVjdE9ic2VydmVyXCI6Nn1dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfTG9hZE1hbmFnZXIyID0gcmVxdWlyZShcIi4vTG9hZE1hbmFnZXJcIik7XG5cbnZhciBfTG9hZE1hbmFnZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9hZE1hbmFnZXIyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMb2FkaW5nIGltcGxlbWVudGF0aW9uIHVzaW5nIHNlcnZlci1zaWRlIFByb3h5LiBJIHVzZSBhIGZyZWUgc2VydmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBhdCBodHRwOi8vd3d3LndoYXRldmVyb3JpZ2luLm9yZyB3aGljaCBqdXN0IHJldHVybnMgSlNPTiBkYXRhIHZpYSBKU09OUC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cbnZhciBMb2FkTWFuYWdlclByb3h5ID0gZnVuY3Rpb24gKF9Mb2FkTWFuYWdlcikge1xuICBfaW5oZXJpdHMoTG9hZE1hbmFnZXJQcm94eSwgX0xvYWRNYW5hZ2VyKTtcblxuICBmdW5jdGlvbiBMb2FkTWFuYWdlclByb3h5KE9ic2VydmVyTGlzdCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2FkTWFuYWdlclByb3h5KTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMb2FkTWFuYWdlclByb3h5Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTG9hZE1hbmFnZXJQcm94eSkpLmNhbGwodGhpcywgT2JzZXJ2ZXJMaXN0KSk7XG5cbiAgICBfdGhpcy51cmwgPSBcImh0dHA6Ly93d3cud2hhdGV2ZXJvcmlnaW4ub3JnL2dldD91cmw9aHR0cDovLzgxLjE3Ny4xMDEuMTQzOjMwMDgwL3Rlc3QuanNvblwiO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhMb2FkTWFuYWdlclByb3h5LCBbe1xuICAgIGtleTogXCJsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gTGV0cyBnZXQgSlNPTiB3aXRoIG5lZWRlZCBkYXRhIHZpYSBQcm94eVxuICAgICAgICB2YXIgY2FsbGJhY2tOYW1lID0gJ2pzb25wX2NhbGxiYWNrXycgKyBNYXRoLnJvdW5kKDEwMDAwMCAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgICB3aW5kb3dbY2FsbGJhY2tOYW1lXSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgZGVsZXRlIHdpbmRvd1tjYWxsYmFja05hbWVdO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LnNyYyA9IF90aGlzMi51cmwgKyAofl90aGlzMi51cmwuaW5kZXhPZignPycpID8gJyYnIDogJz8nKSArICdjYWxsYmFjaz0nICsgY2FsbGJhY2tOYW1lO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBMb2FkTWFuYWdlclByb3h5O1xufShfTG9hZE1hbmFnZXIzLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBMb2FkTWFuYWdlclByb3h5O1xuXG59LHtcIi4vTG9hZE1hbmFnZXJcIjoyfV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLypcclxuICogT2JzZXJ2ZXJMaXN0LCBhZGRzIGFuZCBob2xkcyBvYnNlcnZlcnMgZm9yIHRoZSBTdWJqZWN0cy5cclxuICogT2JzZXJ2ZXJzIC0gb2JqZWN0cyB0aGF0IGRlcGVuZCBzb21laG93IG9uIHRoZSBvYmplY3QgdGhleSBvYnNlcnZlLlxyXG4gKi9cbnZhciBPYnNlcnZlckxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE9ic2VydmVyTGlzdCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2JzZXJ2ZXJMaXN0KTtcblxuICAgIHRoaXMubGlzdCA9IHt9O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE9ic2VydmVyTGlzdCwgW3tcbiAgICBrZXk6IFwiYWRkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChldnQsIG9ic2VydmVyLCBjYWxsYmFjaykge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMubGlzdFtldnRdKSkgdGhpcy5saXN0W2V2dF0gPSBbXTtcbiAgICAgIHRoaXMubGlzdFtldnRdLnB1c2goe1xuICAgICAgICBpbnN0YW5jZTogb2JzZXJ2ZXIsXG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE9ic2VydmVyTGlzdDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gT2JzZXJ2ZXJMaXN0O1xuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9TdWJqZWN0T2JzZXJ2ZXIyID0gcmVxdWlyZSgnLi9TdWJqZWN0T2JzZXJ2ZXInKTtcblxudmFyIF9TdWJqZWN0T2JzZXJ2ZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ViamVjdE9ic2VydmVyMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0gLypcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU3RvcmFnZU1hbmFnZXIgbWFuYWdlcyBzYXZpbmcgJiByZXRyaWV2aW5nIGRhdGEuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFN0b3JhZ2VNYW5hZ2VyIGluaXRpYWxseSBhbHdheXMgZ2V0IGV4YWN0bHkgdGhlIHNhbWUgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBmcm9tIHRoZSBzZXNzaW9uU3RvcmFnZSBpdCBzYXZlZCB1cG9uIGdldHRpbmcuIFRoZW4gdmlhIGZ1bmN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBvbmx5IGNodW5rcyBwYXNzZWQgdG8gdGhlIHZpZXdzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuXG52YXIgU3RvcmFnZU1hbmFnZXIgPSBmdW5jdGlvbiAoX1N1YmplY3RPYnNlcnZlcikge1xuICBfaW5oZXJpdHMoU3RvcmFnZU1hbmFnZXIsIF9TdWJqZWN0T2JzZXJ2ZXIpO1xuXG4gIGZ1bmN0aW9uIFN0b3JhZ2VNYW5hZ2VyKE9ic2VydmVyTGlzdCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdG9yYWdlTWFuYWdlcik7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU3RvcmFnZU1hbmFnZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTdG9yYWdlTWFuYWdlcikpLmNhbGwodGhpcywgT2JzZXJ2ZXJMaXN0KSk7XG5cbiAgICBfdGhpcy5uYW1lID0gJ3Jvc3RlbGVjb20nO1xuICAgIF90aGlzLmRhdGEgPSBudWxsO1xuICAgIF90aGlzLnR5cGUgPSAnc2Vzc2lvblN0b3JhZ2UnO1xuICAgIF90aGlzLnNvcnRQcm9wID0gJ2FnZSc7XG4gICAgX3RoaXMuc2hvd25JZHMgPSBbXTsgLy8ga2VlcHMgdHJhY2sgb2Ygd2hhdCBpcyBjdXJyZW50bHkgc2hvd25cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3RvcmFnZU1hbmFnZXIsIFt7XG4gICAga2V5OiAndG90YWxOdW0nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0b3RhbE51bSgpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEpIHJldHVybiB0aGlzLnRvdGFsID0gdGhpcy5kYXRhLmxlbmd0aDtcbiAgICAgIHJldHVybiB0aGlzLnRvdGFsID0gSlNPTi5wYXJzZSh3aW5kb3dbdGhpcy50eXBlXS5nZXRJdGVtKHRoaXMubmFtZSkpLmxlbmd0aDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW1vdmVJdGVtSWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVJdGVtSWQoaWQpIHtcbiAgICAgIC8vIHJlbW92ZXMgYW4gaWQgZnJvbSB0aGUgbGlzdCBvZiB0aGUgc2hvd24gaWRzXG4gICAgICBpZiAofnRoaXMuc2hvd25JZHMuaW5kZXhPZihpZCkpIHRoaXMuc2hvd25JZHMuc3BsaWNlKHRoaXMuc2hvd25JZHMuaW5kZXhPZihpZCksIDEpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2lzQXZhaWxhYmxlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNBdmFpbGFibGUoKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgc3RvcmFnZSA9IHdpbmRvd1t0aGlzLnR5cGVdLFxuICAgICAgICAgICAgeCA9ICdfX3N0b3JhZ2VfdGVzdF9fJztcbiAgICAgICAgc3RvcmFnZS5zZXRJdGVtKHgsIHgpO1xuICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNFbXB0eScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzRW1wdHkoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNBdmFpbGFibGUoKSkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAod2luZG93W3RoaXMudHlwZV0uZ2V0SXRlbSh0aGlzLm5hbWUpKSByZXR1cm4gZmFsc2U7ZWxzZSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzYXZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZShkYXRhKSB7XG4gICAgICBpZiAoIWRhdGEpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICghdGhpcy5pc0F2YWlsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHdpbmRvd1t0aGlzLnR5cGVdLnNldEl0ZW0odGhpcy5uYW1lLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzb3J0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc29ydChpdGVtcykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIC8vIGR1ZSB0byBzbGljZSgpIHJldHVybnMgYSBuZXcgYXJyYXksIGRvZXNuJ3QgY2hhbmdlIHRoZSBvcmlnaW5hbCBvbmVcbiAgICAgIHJldHVybiBpdGVtcy5zbGljZSgwKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhW190aGlzMi5zb3J0UHJvcF0gPiBiW190aGlzMi5zb3J0UHJvcF0gPyAxIDogYVtfdGhpczIuc29ydFByb3BdIDwgYltfdGhpczIuc29ydFByb3BdID8gLTEgOiAwO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFnaW5hdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYWdpbmF0ZShpdGVtcykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBpdGVtc1RvU2hvdyA9IFtdLFxuICAgICAgICAgIGNvdW50ID0gMDtcbiAgICAgIGl0ZW1zLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIC8vIHN0b3AsIGlmIHdlIGdvdCA0IGl0ZW1zIG9yIHRoZXJlIGFyZSBubyBtb3JlIGl0ZW1zXG4gICAgICAgIGlmIChjb3VudCA9PT0gX3RoaXMzLnBlclJvdyB8fCBfdGhpczMuc2hvd25JZHMubGVuZ3RoID09PSBfdGhpczMudG90YWxOdW0oKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIX5fdGhpczMuc2hvd25JZHMuaW5kZXhPZihpdGVtLmlkKSkge1xuICAgICAgICAgIGl0ZW1zVG9TaG93LnB1c2goaXRlbSk7XG4gICAgICAgICAgX3RoaXMzLnNob3duSWRzLnB1c2goaXRlbS5pZCk7XG4gICAgICAgICAgY291bnQrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGl0ZW1zVG9TaG93O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Jlc3RvcmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXN0b3JlKCkge1xuICAgICAgLy8gcmV0dXJucyBhbHJlYWR5IGNodW5rZWQgZGF0YSwgbm90IGFsbCB0aGUgZGF0YVxuICAgICAgaWYgKHRoaXMuZGF0YSkgcmV0dXJuIHRoaXMucGFnaW5hdGUodGhpcy5zb3J0KHRoaXMuZGF0YSkpO1xuICAgICAgcmV0dXJuIHRoaXMucGFnaW5hdGUodGhpcy5zb3J0KEpTT04ucGFyc2Uod2luZG93W3RoaXMudHlwZV0uZ2V0SXRlbSh0aGlzLm5hbWUpKSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdG9yYWdlTWFuYWdlcjtcbn0oX1N1YmplY3RPYnNlcnZlcjMuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFN0b3JhZ2VNYW5hZ2VyO1xuXG59LHtcIi4vU3ViamVjdE9ic2VydmVyXCI6Nn1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKlxyXG4gKiBTdWJqZWN0T2JzZXJ2ZXIsIGFkZHMgU3ViamVjdC9PYnNlcnZlciBmdW5jdGlvbmFsaXR5IHRvIHRoZSBvYmplY3RzXHJcbiAqIGFuZCBob2xkcyBzb21lIGNvbW1vbiBwcm9wZXJ0aWVzLi5cclxuICogU3ViamVjdHMgd2lsbCBlbWl0IGEgbWVzc2FnZSB0byBpbmZvcm0gYWxsIHRoZSBkZXBlbmRhbnRzIHRoYXQgc29tZXRoaW5nIGltcG9ydGFudCBvY2N1cnJlZDtcclxuICogT2JzZXJ2ZXJzIC0gYXJlIHRob3NlIGRlcGVuZGFudHMgdGhhdCB3aWxsIHJlYWN0IHNvbWVob3cuXHJcbiAqL1xudmFyIFN1YmplY3RPYnNlcnZlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3ViamVjdE9ic2VydmVyKE9ic2VydmVyTGlzdCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWJqZWN0T2JzZXJ2ZXIpO1xuXG4gICAgdGhpcy5vYnNlcnZlcnMgPSBPYnNlcnZlckxpc3Q7XG4gICAgdGhpcy5hcHBJZCA9ICdjb250YWluZXInO1xuICAgIHRoaXMuaXRlbXNJZCA9ICdpdGVtcyc7XG4gICAgdGhpcy5sb2FkaW5nQ2xhc3MgPSAnbG9hZGluZyc7XG4gICAgdGhpcy5wZXJSb3cgPSA0O1xuICB9XG4gIC8vIFN1YmplY3QgbWV0aG9kc1xuXG5cbiAgX2NyZWF0ZUNsYXNzKFN1YmplY3RPYnNlcnZlciwgW3tcbiAgICBrZXk6ICdhZGRPYnNlcnZlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZE9ic2VydmVyKGV2dCwgb2JzZXJ2ZXIsIGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLm9ic2VydmVycy5hZGQoZXZ0LCBvYnNlcnZlciwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ25vdGlmeScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG5vdGlmeShldnQsIGRhdGEpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzLmxpc3RbZXZ0XS5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuaW5zdGFuY2UudXBkYXRlKG9ic2VydmVyLmNhbGxiYWNrLCBkYXRhKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBPYnNlcnZlciBtZXRob2RcblxuICB9LCB7XG4gICAga2V5OiAndXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKGNhbGxiYWNrLCBkYXRhKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKHRoaXMsIGRhdGEpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdWJqZWN0T2JzZXJ2ZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFN1YmplY3RPYnNlcnZlcjtcblxufSx7fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfU3ViamVjdE9ic2VydmVyMiA9IHJlcXVpcmUoJy4vU3ViamVjdE9ic2VydmVyJyk7XG5cbnZhciBfU3ViamVjdE9ic2VydmVyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N1YmplY3RPYnNlcnZlcjIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFZpZXdNYW5hZ2VyaXMgcmVzcG9uc2libGUgZm9yIHRoZSB2aWV3cyBhbmQgaXQgYWxzbyBkZXRlY3RzIHdoZW4gdGhlIERPTSBpcyByZWFkeS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cblxudmFyIFZpZXdNYW5hZ2VyID0gZnVuY3Rpb24gKF9TdWJqZWN0T2JzZXJ2ZXIpIHtcbiAgX2luaGVyaXRzKFZpZXdNYW5hZ2VyLCBfU3ViamVjdE9ic2VydmVyKTtcblxuICBmdW5jdGlvbiBWaWV3TWFuYWdlcihPYnNlcnZlckxpc3QpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVmlld01hbmFnZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChWaWV3TWFuYWdlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFZpZXdNYW5hZ2VyKSkuY2FsbCh0aGlzLCBPYnNlcnZlckxpc3QpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhWaWV3TWFuYWdlciwgW3tcbiAgICBrZXk6ICdyZWFkeScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWR5KCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykgcmVzb2x2ZShkb2N1bWVudC5yZWFkeVN0YXRlKTtcbiAgICAgICAgZG9jdW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICh+WydpbnRlcmFjdGl2ZScsICdjb21wbGV0ZSddLmluZGV4T2YoZG9jdW1lbnQucmVhZHlTdGF0ZSkpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZG9jdW1lbnQucmVhZHlTdGF0ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlclZpZXcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJWaWV3KGRhdGEpIHtcbiAgICAgIHZhciByb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hcHBJZCk7XG4gICAgICB2YXIgdmlldyA9ICc8ZGl2IGlkPVwiJyArIHRoaXMuaXRlbXNJZCArICdcIj4nICsgdGhpcy50ZW1wbGF0ZUl0ZW1zKGRhdGEpICsgJzwvZGl2PlxcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtZG93bmxvYWQ+PGltZyBzcmM9XCJzcGlubmVyLmdpZlwiPmRvd25sb2FkPC9idXR0b24+JztcbiAgICAgIHJvb3QuaW5uZXJIVE1MID0gdmlldztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXJJdGVtcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckl0ZW1zKGRhdGEpIHtcbiAgICAgIHZhciByb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pdGVtc0lkKTtcbiAgICAgIHJvb3QuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgdGhpcy50ZW1wbGF0ZUl0ZW1zKGRhdGEpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd0ZW1wbGF0ZUl0ZW1zJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdGVtcGxhdGVJdGVtcyhkYXRhKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIGl0ZW1zID0gJyc7XG4gICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaXRlbXMgKz0gX3RoaXMyLnRlbXBsYXRlSXRlbShpdGVtKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3RlbXBsYXRlSXRlbScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRlbXBsYXRlSXRlbShpdGVtKSB7XG4gICAgICB0aGlzLnNob3duKys7XG4gICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJpdGVtXCI+XFxuICAgICAgICAgICAgICA8aW1nIHNyYz1cInNwaW5uZXIuZ2lmXCIgY2xhc3M9XCJuby1pbWFnZVwiLz5cXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4XCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50IGZyb250XCI+PHNwYW4+JyArIGl0ZW0ubmFtZSArICc8L3NwYW4+PC9kaXY+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50IGJhY2tcIj5cXG4gICAgICAgICAgICAgICAgICA8c3Bhbj4nICsgaXRlbS5uYW1lICsgJzwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgICA8c3Bhbj4nICsgaXRlbS50ZXh0ICsgJzwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtZGVsZXRlPVwiJyArIGl0ZW0uaWQgKyAnXCI+PGltZyBzcmM9XCJzcGlubmVyLmdpZlwiPmRlbGV0ZTwvYnV0dG9uPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2Pic7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFZpZXdNYW5hZ2VyO1xufShfU3ViamVjdE9ic2VydmVyMy5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gVmlld01hbmFnZXI7XG5cbn0se1wiLi9TdWJqZWN0T2JzZXJ2ZXJcIjo2fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxudmFyIF9jb25maWcgPSByZXF1aXJlKFwiLi9jb25maWdcIik7XG5cbnZhciBqc29uID0gX2NvbmZpZy5zdG9yYWdlTWFuYWdlci5pc0VtcHR5KCkgPyBfY29uZmlnLmxvYWRNYW5hZ2VyLmxvYWQoKSA6IFByb21pc2UucmVzb2x2ZShmYWxzZSksXG4gICAgZG9tID0gX2NvbmZpZy52aWV3TWFuYWdlci5yZWFkeSgpO1xuXG5Qcm9taXNlLmFsbChbanNvbiwgZG9tXSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gIF9jb25maWcubG9hZE1hbmFnZXIubm90aWZ5KCdkYXRhTG9hZGVkJywgcmVzdWx0WzBdWydjb250ZW50cyddKTtcbiAgX2NvbmZpZy5sb2FkTWFuYWdlci5ub3RpZnkoJ3RvdGFsTnVtJywgX2NvbmZpZy5zdG9yYWdlTWFuYWdlci50b3RhbE51bSgpKTtcbiAgX2NvbmZpZy5ldmVudE1hbmFnZXIuc2V0RXZlbnRIYW5kbGVycyhfY29uZmlnLnN0b3JhZ2VNYW5hZ2VyKTtcbiAgX2NvbmZpZy5ldmVudE1hbmFnZXIubm90aWZ5KCdoYW5kbGVyc1JlYWR5JywgX2NvbmZpZy5zdG9yYWdlTWFuYWdlci5yZXN0b3JlKCkpO1xufSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gIF9jb25maWcubG9hZE1hbmFnZXIubm90aWZ5KCd0ZXN0JywgZXJyb3IpO1xufSk7XG5cbn0se1wiLi9jb25maWdcIjo5fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmV2ZW50TWFuYWdlciA9IGV4cG9ydHMuc3RvcmFnZU1hbmFnZXIgPSBleHBvcnRzLnZpZXdNYW5hZ2VyID0gZXhwb3J0cy5sb2FkTWFuYWdlciA9IHVuZGVmaW5lZDtcblxudmFyIF9PYnNlcnZlckxpc3QgPSByZXF1aXJlKCcuL09ic2VydmVyTGlzdCcpO1xuXG52YXIgX09ic2VydmVyTGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PYnNlcnZlckxpc3QpO1xuXG52YXIgX1ZpZXdNYW5hZ2VyID0gcmVxdWlyZSgnLi9WaWV3TWFuYWdlcicpO1xuXG52YXIgX1ZpZXdNYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1ZpZXdNYW5hZ2VyKTtcblxudmFyIF9FdmVudE1hbmFnZXIgPSByZXF1aXJlKCcuL0V2ZW50TWFuYWdlcicpO1xuXG52YXIgX0V2ZW50TWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FdmVudE1hbmFnZXIpO1xuXG52YXIgX0xvYWRNYW5hZ2VyUHJveHkgPSByZXF1aXJlKCcuL0xvYWRNYW5hZ2VyUHJveHknKTtcblxudmFyIF9Mb2FkTWFuYWdlclByb3h5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvYWRNYW5hZ2VyUHJveHkpO1xuXG52YXIgX1N0b3JhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnLi9TdG9yYWdlTWFuYWdlcicpO1xuXG52YXIgX1N0b3JhZ2VNYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N0b3JhZ2VNYW5hZ2VyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGxvYWRNYW5hZ2VyID0gbmV3IF9Mb2FkTWFuYWdlclByb3h5Mi5kZWZhdWx0KG5ldyBfT2JzZXJ2ZXJMaXN0Mi5kZWZhdWx0KCkpOyAvKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvbmZpZyB2YXJpYWJsZSBlc3RhYmxpc2hlcyBTdWJqZWN0LU9ic2VydmVyIHJlbGFzaGlvbnNoaXBzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgdmlld01hbmFnZXIgPSBuZXcgX1ZpZXdNYW5hZ2VyMi5kZWZhdWx0KG5ldyBfT2JzZXJ2ZXJMaXN0Mi5kZWZhdWx0KCkpO1xudmFyIHN0b3JhZ2VNYW5hZ2VyID0gbmV3IF9TdG9yYWdlTWFuYWdlcjIuZGVmYXVsdChuZXcgX09ic2VydmVyTGlzdDIuZGVmYXVsdCgpKTtcbnZhciBldmVudE1hbmFnZXIgPSBuZXcgX0V2ZW50TWFuYWdlcjIuZGVmYXVsdChuZXcgX09ic2VydmVyTGlzdDIuZGVmYXVsdCgpKTtcblxudmFyIGNvbmZpZyA9IFt7XG4gIGluc3RhbmNlOiBsb2FkTWFuYWdlciwgLy8gU3ViamVjdCwgd2lsbCBpbmZvcm0gdGhlIGRlcGVuZGFudHNcbiAgbm90aWZpZXM6IFt7XG4gICAgbmFtZTogJ2RhdGFMb2FkZWQnLCAvLyBtZXNzYWdlXG4gICAgb2JzZXJ2ZXJzOiBbe1xuICAgICAgaW5zdGFuY2U6IHN0b3JhZ2VNYW5hZ2VyLFxuICAgICAgY2FsbGJhY2s6IHN0b3JhZ2VNYW5hZ2VyLnNhdmVcbiAgICB9XVxuICB9LCB7XG4gICAgbmFtZTogJ3RvdGFsTnVtJyxcbiAgICBvYnNlcnZlcnM6IFt7XG4gICAgICBpbnN0YW5jZTogZXZlbnRNYW5hZ2VyLFxuICAgICAgY2FsbGJhY2s6IGV2ZW50TWFuYWdlci5zZXRUb3RhbFxuICAgIH1dXG4gIH1dXG59LCB7XG4gIGluc3RhbmNlOiB2aWV3TWFuYWdlcixcbiAgbm90aWZpZXM6IFt7XG4gICAgbmFtZTogJ2RvbVJlYWR5JyxcbiAgICBvYnNlcnZlcnM6IFt7XG4gICAgICBpbnN0YW5jZTogZXZlbnRNYW5hZ2VyLFxuICAgICAgY2FsbGJhY2s6IGV2ZW50TWFuYWdlci5zZXRIYW5kbGVyc1xuICAgIH1dXG4gIH1dXG59LCB7XG4gIGluc3RhbmNlOiBldmVudE1hbmFnZXIsXG4gIG5vdGlmaWVzOiBbe1xuICAgIG5hbWU6ICdoYW5kbGVyc1JlYWR5JyxcbiAgICBvYnNlcnZlcnM6IFt7XG4gICAgICBpbnN0YW5jZTogdmlld01hbmFnZXIsXG4gICAgICBjYWxsYmFjazogdmlld01hbmFnZXIucmVuZGVyVmlld1xuICAgIH1dXG4gIH0sIHtcbiAgICBuYW1lOiAnc2hvd01vcmUnLFxuICAgIG9ic2VydmVyczogW3tcbiAgICAgIGluc3RhbmNlOiB2aWV3TWFuYWdlcixcbiAgICAgIGNhbGxiYWNrOiB2aWV3TWFuYWdlci5yZW5kZXJJdGVtc1xuICAgIH1dXG4gIH0sIHtcbiAgICBuYW1lOiAncmVtb3ZlRWxlbScsXG4gICAgb2JzZXJ2ZXJzOiBbe1xuICAgICAgaW5zdGFuY2U6IHN0b3JhZ2VNYW5hZ2VyLFxuICAgICAgY2FsbGJhY2s6IHN0b3JhZ2VNYW5hZ2VyLnJlbW92ZUl0ZW1JZFxuICAgIH1dXG4gIH1dXG59XTtcbmV2ZW50TWFuYWdlci5zZXRPYnNlcnZlcnMoY29uZmlnKTtcbmV4cG9ydHMubG9hZE1hbmFnZXIgPSBsb2FkTWFuYWdlcjtcbmV4cG9ydHMudmlld01hbmFnZXIgPSB2aWV3TWFuYWdlcjtcbmV4cG9ydHMuc3RvcmFnZU1hbmFnZXIgPSBzdG9yYWdlTWFuYWdlcjtcbmV4cG9ydHMuZXZlbnRNYW5hZ2VyID0gZXZlbnRNYW5hZ2VyO1xuXG59LHtcIi4vRXZlbnRNYW5hZ2VyXCI6MSxcIi4vTG9hZE1hbmFnZXJQcm94eVwiOjMsXCIuL09ic2VydmVyTGlzdFwiOjQsXCIuL1N0b3JhZ2VNYW5hZ2VyXCI6NSxcIi4vVmlld01hbmFnZXJcIjo3fV19LHt9LFs4XSk7XG4iXX0=
