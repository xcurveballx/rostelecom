!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=t,this.url="http://81.177.101.143:30080/test.json"}return r(e,[{key:"addObserver",value:function(e,t,n){this.observers.add(e,t,n)}},{key:"notify",value:function(e,t){this.observers.list[e].forEach(function(e){return e.instance.update(e.callback,t)})}}]),e}();n.default=o},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./LoadManager"),i=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.url="http://www.whateverorigin.org/get?url=http://81.177.101.143:30080/test.json",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"load",value:function(){var e=this;return new Promise(function(t,n){var r="jsonp_callback_"+Math.round(1e5*Math.random());window[r]=function(e){delete window[r],document.body.removeChild(o),t(e)};var o=document.createElement("script");o.src=e.url+(~e.url.indexOf("?")?"&":"?")+"callback="+r,document.body.appendChild(o),o.onerror=function(e){n(e)}})}}]),t}();n.default=u},{"./LoadManager":1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.list={}}return r(e,[{key:"add",value:function(e,t,n){Array.isArray(this.list[e])||(this.list[e]=[]),this.list[e].push({instance:t,callback:n})}}]),e}();n.default=o},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storage=t}return r(e,[{key:"update",value:function(e,t){e(t)}},{key:"doSomething",value:function(e){console.log(e)}}]),e}();n.default=o},{}],5:[function(e,t,n){"use strict";var r=i(e("./ObserverList")),o=i(e("./LoadManagerProxy")),a=i(e("./StorageManager"));function i(e){return e&&e.__esModule?e:{default:e}}var u=new o.default(new r.default),c=new a.default("rostelecom");[{instance:u,notifies:[{name:"test",observers:[{instance:c,callback:c.doSomething}]}]}].forEach(function(e){e.notifies.forEach(function(t){t.observers.forEach(function(n){e.instance.addObserver(t.name,n.instance,n.callback)})})});var f=u.load();Promise.all([f]).then(function(e){return u.notify("test",e)},function(e){return u.notify("test",e)})},{"./LoadManagerProxy":2,"./ObserverList":3,"./StorageManager":4}]},{},[5]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImtleSIsIkNvbnN0cnVjdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiTG9hZE1hbmFnZXIiLCJPYnNlcnZlckxpc3QiLCJpbnN0YW5jZSIsIlR5cGVFcnJvciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJvYnNlcnZlcnMiLCJ1cmwiLCJldnQiLCJvYnNlcnZlciIsImNhbGxiYWNrIiwiYWRkIiwiZGF0YSIsImxpc3QiLCJmb3JFYWNoIiwidXBkYXRlIiwiZGVmYXVsdCIsIjIiLCJvYmoiLCJfTG9hZE1hbmFnZXIyIiwiX0xvYWRNYW5hZ2VyMyIsIl9fZXNNb2R1bGUiLCJMb2FkTWFuYWdlclByb3h5IiwiX0xvYWRNYW5hZ2VyIiwiX3RoaXMiLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsImdldFByb3RvdHlwZU9mIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzZXRQcm90b3R5cGVPZiIsIl9pbmhlcml0cyIsIl90aGlzMiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2FsbGJhY2tOYW1lIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwid2luZG93IiwiZG9jdW1lbnQiLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiaW5kZXhPZiIsImFwcGVuZENoaWxkIiwib25lcnJvciIsImVycm9yIiwiLi9Mb2FkTWFuYWdlciIsIjMiLCJBcnJheSIsImlzQXJyYXkiLCJwdXNoIiwiNCIsIlN0b3JhZ2VNYW5hZ2VyIiwic3RvcmFnZSIsImNvbnNvbGUiLCJsb2ciLCI1IiwiX09ic2VydmVyTGlzdDIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX0xvYWRNYW5hZ2VyUHJveHkyIiwiX1N0b3JhZ2VNYW5hZ2VyMiIsImxvYWRNYW5hZ2VyIiwic3RvcmFnZU1hbmFnZXIiLCJub3RpZmllcyIsIm5hbWUiLCJkb1NvbWV0aGluZyIsInN1YmplY3QiLCJhZGRPYnNlcnZlciIsInByb21pc2UiLCJsb2FkIiwiYWxsIiwidGhlbiIsInJlc3VsdCIsIm5vdGlmeSIsIi4vTG9hZE1hbmFnZXJQcm94eSIsIi4vT2JzZXJ2ZXJMaXN0IiwiLi9TdG9yYWdlTWFuYWdlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxTQUFTQyxFQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsSUFBSUUsRUFBa0IsbUJBQVRDLFNBQXFCQSxRQUFRLElBQUlGLEdBQUdDLEVBQUUsT0FBT0EsRUFBRUYsR0FBRSxHQUFJLEdBQUdJLEVBQUUsT0FBT0EsRUFBRUosR0FBRSxHQUFJLElBQUlLLEVBQUUsSUFBSUMsTUFBTSx1QkFBdUJOLEVBQUUsS0FBSyxNQUFNSyxFQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxJQUFJRyxFQUFFWCxFQUFFRyxJQUFJUyxZQUFZYixFQUFFSSxHQUFHLEdBQUdVLEtBQUtGLEVBQUVDLFFBQVEsU0FBU2QsR0FBRyxJQUFJRSxFQUFFRCxFQUFFSSxHQUFHLEdBQUdMLEdBQUcsT0FBT0ksRUFBRUYsR0FBSUYsSUFBSWEsRUFBRUEsRUFBRUMsUUFBUWQsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxPQUFP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M0IsR0FDWCxPQUFPZ0IsRUFBWVksT0FBTyxPQUFRNUIsT0FHakM2QixxQkFBcUIsRUFBRUMsaUJBQWlCLEVBQUVDLG1CQUFtQixTQUFTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIExvYWRNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBMb2FkTWFuYWdlcihPYnNlcnZlckxpc3QpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9hZE1hbmFnZXIpO1xuXG4gICAgdGhpcy5vYnNlcnZlcnMgPSBPYnNlcnZlckxpc3Q7XG4gICAgdGhpcy51cmwgPSAnaHR0cDovLzgxLjE3Ny4xMDEuMTQzOjMwMDgwL3Rlc3QuanNvbic7XG4gIH1cbiAgLy8gU3ViamVjdCBtZXRob2RzXG5cblxuICBfY3JlYXRlQ2xhc3MoTG9hZE1hbmFnZXIsIFt7XG4gICAga2V5OiAnYWRkT2JzZXJ2ZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRPYnNlcnZlcihldnQsIG9ic2VydmVyLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy5vYnNlcnZlcnMuYWRkKGV2dCwgb2JzZXJ2ZXIsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdub3RpZnknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBub3RpZnkoZXZ0LCBkYXRhKSB7XG4gICAgICB0aGlzLm9ic2VydmVycy5saXN0W2V2dF0uZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVyLmluc3RhbmNlLnVwZGF0ZShvYnNlcnZlci5jYWxsYmFjaywgZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTG9hZE1hbmFnZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IExvYWRNYW5hZ2VyO1xuXG59LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX0xvYWRNYW5hZ2VyMiA9IHJlcXVpcmUoXCIuL0xvYWRNYW5hZ2VyXCIpO1xuXG52YXIgX0xvYWRNYW5hZ2VyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvYWRNYW5hZ2VyMik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIExvYWRNYW5hZ2VyUHJveHkgPSBmdW5jdGlvbiAoX0xvYWRNYW5hZ2VyKSB7XG4gIF9pbmhlcml0cyhMb2FkTWFuYWdlclByb3h5LCBfTG9hZE1hbmFnZXIpO1xuXG4gIGZ1bmN0aW9uIExvYWRNYW5hZ2VyUHJveHkoT2JzZXJ2ZXJMaXN0KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvYWRNYW5hZ2VyUHJveHkpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExvYWRNYW5hZ2VyUHJveHkuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihMb2FkTWFuYWdlclByb3h5KSkuY2FsbCh0aGlzLCBPYnNlcnZlckxpc3QpKTtcblxuICAgIF90aGlzLnVybCA9IFwiaHR0cDovL3d3dy53aGF0ZXZlcm9yaWdpbi5vcmcvZ2V0P3VybD1odHRwOi8vODEuMTc3LjEwMS4xNDM6MzAwODAvdGVzdC5qc29uXCI7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8vIEdlbmVyYWwgZnVuY3Rpb25hbGl0eVxuXG5cbiAgX2NyZWF0ZUNsYXNzKExvYWRNYW5hZ2VyUHJveHksIFt7XG4gICAga2V5OiBcImxvYWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBMZXRzIGdldCBKU09OIHdpdGggbmVlZGVkIGRhdGEgdmlhIFByb3h5XG4gICAgICAgIHZhciBjYWxsYmFja05hbWUgPSAnanNvbnBfY2FsbGJhY2tfJyArIE1hdGgucm91bmQoMTAwMDAwICogTWF0aC5yYW5kb20oKSk7XG4gICAgICAgIHdpbmRvd1tjYWxsYmFja05hbWVdID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBkZWxldGUgd2luZG93W2NhbGxiYWNrTmFtZV07XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICBzY3JpcHQuc3JjID0gX3RoaXMyLnVybCArICh+X3RoaXMyLnVybC5pbmRleE9mKCc/JykgPyAnJicgOiAnPycpICsgJ2NhbGxiYWNrPScgKyBjYWxsYmFja05hbWU7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIExvYWRNYW5hZ2VyUHJveHk7XG59KF9Mb2FkTWFuYWdlcjMuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IExvYWRNYW5hZ2VyUHJveHk7XG5cbn0se1wiLi9Mb2FkTWFuYWdlclwiOjF9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgT2JzZXJ2ZXJMaXN0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBPYnNlcnZlckxpc3QoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9ic2VydmVyTGlzdCk7XG5cbiAgICB0aGlzLmxpc3QgPSB7fTtcbiAgfVxuICAvLyBPYnNlcnZlckxpc3QsIGFkZHMgYW5kIGhvbGRzIG9ic2VydmVycyBmb3IgdGhlIFN1YmplY3RcblxuXG4gIF9jcmVhdGVDbGFzcyhPYnNlcnZlckxpc3QsIFt7XG4gICAga2V5OiBcImFkZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQoZXZ0LCBvYnNlcnZlciwgY2FsbGJhY2spIHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLmxpc3RbZXZ0XSkpIHRoaXMubGlzdFtldnRdID0gW107XG4gICAgICB0aGlzLmxpc3RbZXZ0XS5wdXNoKHtcbiAgICAgICAgaW5zdGFuY2U6IG9ic2VydmVyLFxuICAgICAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBPYnNlcnZlckxpc3Q7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE9ic2VydmVyTGlzdDtcblxufSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFN0b3JhZ2VNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTdG9yYWdlTWFuYWdlcihzdG9yYWdlKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0b3JhZ2VNYW5hZ2VyKTtcblxuICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XG4gIH1cbiAgLy8gT2JzZXJ2ZXIgbWV0aG9kXG5cblxuICBfY3JlYXRlQ2xhc3MoU3RvcmFnZU1hbmFnZXIsIFt7XG4gICAga2V5OiBcInVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoY2FsbGJhY2ssIGRhdGEpIHtcbiAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJkb1NvbWV0aGluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkb1NvbWV0aGluZyhkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3RvcmFnZU1hbmFnZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFN0b3JhZ2VNYW5hZ2VyO1xuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG52YXIgX09ic2VydmVyTGlzdCA9IHJlcXVpcmUoJy4vT2JzZXJ2ZXJMaXN0Jyk7XG5cbnZhciBfT2JzZXJ2ZXJMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX09ic2VydmVyTGlzdCk7XG5cbnZhciBfTG9hZE1hbmFnZXJQcm94eSA9IHJlcXVpcmUoJy4vTG9hZE1hbmFnZXJQcm94eScpO1xuXG52YXIgX0xvYWRNYW5hZ2VyUHJveHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9hZE1hbmFnZXJQcm94eSk7XG5cbnZhciBfU3RvcmFnZU1hbmFnZXIgPSByZXF1aXJlKCcuL1N0b3JhZ2VNYW5hZ2VyJyk7XG5cbnZhciBfU3RvcmFnZU1hbmFnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3RvcmFnZU1hbmFnZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgbG9hZE1hbmFnZXIgPSBuZXcgX0xvYWRNYW5hZ2VyUHJveHkyLmRlZmF1bHQobmV3IF9PYnNlcnZlckxpc3QyLmRlZmF1bHQoKSk7XG52YXIgc3RvcmFnZU1hbmFnZXIgPSBuZXcgX1N0b3JhZ2VNYW5hZ2VyMi5kZWZhdWx0KCdyb3N0ZWxlY29tJyk7XG5cbnZhciBjb25maWcgPSBbe1xuICBpbnN0YW5jZTogbG9hZE1hbmFnZXIsXG4gIG5vdGlmaWVzOiBbe1xuICAgIG5hbWU6ICd0ZXN0JyxcbiAgICBvYnNlcnZlcnM6IFt7XG4gICAgICBpbnN0YW5jZTogc3RvcmFnZU1hbmFnZXIsXG4gICAgICBjYWxsYmFjazogc3RvcmFnZU1hbmFnZXIuZG9Tb21ldGhpbmdcbiAgICB9XVxuICB9XVxufV07XG5cbmNvbmZpZy5mb3JFYWNoKGZ1bmN0aW9uIChzdWJqZWN0KSB7XG4gIHN1YmplY3Qubm90aWZpZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG4gICAgZXZ0Lm9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgc3ViamVjdC5pbnN0YW5jZS5hZGRPYnNlcnZlcihldnQubmFtZSwgb2JzZXJ2ZXIuaW5zdGFuY2UsIG9ic2VydmVyLmNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxudmFyIHByb21pc2UgPSBsb2FkTWFuYWdlci5sb2FkKCk7XG5cblByb21pc2UuYWxsKFtwcm9taXNlXSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gIHJldHVybiBsb2FkTWFuYWdlci5ub3RpZnkoJ3Rlc3QnLCByZXN1bHQpO1xufSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gIHJldHVybiBsb2FkTWFuYWdlci5ub3RpZnkoJ3Rlc3QnLCBlcnJvcik7XG59KTtcblxufSx7XCIuL0xvYWRNYW5hZ2VyUHJveHlcIjoyLFwiLi9PYnNlcnZlckxpc3RcIjozLFwiLi9TdG9yYWdlTWFuYWdlclwiOjR9XX0se30sWzVdKTtcbiJdfQ==
